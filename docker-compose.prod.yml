services:
  cargo_app:
    container_name: cargo_app
    build:
      context: .
      dockerfile: Dockerfile

    command: >
      gunicorn cargodb.wsgi:application
      --bind 0.0.0.0:8000

    # üî• –ü–æ–¥–∫–ª—é—á–∞–µ–º —Ç–≤–æ–∏ .env —Ñ–∞–π–ª—ã, –ª–µ–∂–∞—â–∏–µ –Ω–∞ –¥–∏—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
    env_file:
      - .env.prod
      - .env.secrets

    ports:
      - "8000:8000"

    volumes:
      # —Å—Ç–∞—Ç–∏–∫–∞ –∏ –º–µ–¥–∏–∞ –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –º–µ–∂–¥—É –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞–º–∏
      - /var/www/cargodb/staticfiles:/app/staticfiles
      - /var/www/cargodb/media:/app/media

    networks:
      - default

networks:
  default:
    name: cargodb_default
