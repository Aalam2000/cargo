{% extends '../base.html' %}
{% load static %}

{% block title %}–ì—Ä—É–∑—ã ‚Äî Cargo Table{% endblock %}

{% block content %}
    <link rel="stylesheet" href="{% static 'css/table.css' %}">
    <div class="cargo-table-page">
        <div class="table-header-container">
            <h3>üì¶ –¢–∞–±–ª–∏—Ü–∞ –≥—Ä—É–∑–æ–≤</h3>

            <div class="d-flex gap-3">
                <div class="filter-container d-flex gap-2"></div>
                <button id="settings-btn" class="settings-button" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>
                {% if user.role in "Admin,Operator" %}
                    <button id="add-row" class="btn-table">–î–æ–±–∞–≤–∏—Ç—å</button>
                {% endif %}
            </div>
        </div>

        <div class="table-container">
            <div class="table-wrapper">
                <table id="cargo-table" class="table">
                    <thead>
                    <tr id="cargo-header-row"></tr>
                    </thead>
                    <tbody id="cargo-body"></tbody>
                </table>
            </div>
            <div id="loader" class="loader text-center" style="display:none; padding:12px;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>

        <!-- ‚öôÔ∏è –ú–æ–¥–∞–ª–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        <div id="settings-modal" class="modal">
            <div class="modal-header">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–ª–æ–Ω–æ–∫</div>
            <div class="modal-body">
                <form id="settings-form"></form>
            </div>
            <div class="modal-footer">
                <button id="settings-save" class="btn-table">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button type="button" id="settings-cancel" class="btn-table btn-cancel">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
        <div id="modal-overlay" class="modal-overlay"></div>
    </div>

    <script>
        window.CARGO_USER_ROLE = "{{ user.role }}";
        window.CLIENT_CODE = "{{ user.client_code|default:'' }}";
    </script>
    <script defer src="{% static 'js/cargo_table.js' %}"></script>
{% endblock %}
