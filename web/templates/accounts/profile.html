{% extends '../base.html' %}

{% block title %}Профиль пользователя{% endblock %}

{% block content %}
<div class="profile-card">
    <h1 class="profile-title">Профиль пользователя</h1>

    <form method="POST" class="profile-form">
        {% csrf_token %}

        <div class="profile-grid">
            <div class="form-group">
                <label for="first_name">Имя</label>
                {% if can_edit %}
                    <input type="text" id="first_name" name="first_name" value="{{ user.first_name }}" required>
                {% else %}
                    <p class="readonly">{{ user.first_name }}</p>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="last_name">Фамилия</label>
                {% if can_edit %}
                    <input type="text" id="last_name" name="last_name" value="{{ user.last_name }}" required>
                {% else %}
                    <p class="readonly">{{ user.last_name }}</p>
                {% endif %}
            </div>

            {% if user.access_level == 'Company' %}
            <div class="form-group">
                <label for="client_code">Код клиента</label>
                {% if can_edit %}
                    <input type="text" id="client_code" name="client_code" value="{{ user.client_code }}">
                {% else %}
                    <p class="readonly">{{ user.client_code }}</p>
                {% endif %}
            </div>
            {% endif %}

            <div class="form-group">
                <label for="phone">Телефон</label>
                {% if can_edit %}
                    <input type="text" id="phone" name="phone" value="{{ user.phone }}">
                {% else %}
                    <p class="readonly">{{ user.phone }}</p>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="telegram">Telegram</label>
                {% if can_edit %}
                    <input type="text" id="telegram" name="telegram" value="{{ user.telegram }}">
                {% else %}
                    <p class="readonly">{{ user.telegram }}</p>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="whatsapp">WhatsApp</label>
                {% if can_edit %}
                    <input type="text" id="whatsapp" name="whatsapp" value="{{ user.whatsapp }}">
                {% else %}
                    <p class="readonly">{{ user.whatsapp }}</p>
                {% endif %}
            </div>

            <div class="form-group">
                <label>Email</label>
                <p class="readonly">{{ user.email }}</p>
            </div>

            <div class="form-group">
                <label>Роль</label>
                <p class="readonly">{{ user.role }}</p>
            </div>

            <div class="form-group">
                <label>Уровень доступа</label>
                <p class="readonly">{{ user.access_level }}</p>
            </div>
        </div>

        {% if can_edit %}
            <div class="profile-actions">
                <button type="submit" class="btn">Сохранить изменения</button>
            </div>
        {% endif %}
    </form>
</div>
{% endblock %}
